# 데이터베이스 옵티마이저

## 소개
데이터베이스 옵티마이저는 SQL 쿼리를 실행하는 가장 효율적인 방법을 결정하는 데이터베이스 관리 시스템(DBMS)의 핵심 구성 요소입니다. 다양한 실행 계획을 분석하고 비용 추정 기반으로 최적의 실행 계획을 선택합니다.

## 옵티마이저의 작동 방식
옵티마이저는 실행 계획을 선택할 때 여러 가지 요소를 고려합니다. 그중에서도 **스캐닝 모델(Scanning Model) 선택**이 중요한 역할을 합니다.

## 스캐닝 모델의 종류 및 선택 기준
데이터 검색을 위한 스캐닝 모델을 선택하는 것은 옵티마이저의 핵심 기능 중 하나입니다. 대표적인 스캐닝 모델은 다음과 같습니다.

### 1. 전체 테이블 스캔(Full Table Scan)
- 인덱스 없이 테이블의 모든 데이터를 검색하는 방식
- 소량의 데이터이거나 테이블 전체 검색이 빠른 경우 적합
- WHERE 조건이 없거나 비효율적인 경우 자동 선택됨

### 2. 인덱스 스캔(Index Scan)
- 인덱스를 활용하여 검색 범위를 줄이는 방식
- **범위 검색(Range Scan)**: 특정 범위 내의 데이터를 검색할 때 유용
- **유일 검색(Unique Scan)**: 유일한 값(Primary Key, Unique Index)으로 검색할 때 사용

### 3. 인덱스 온리 스캔(Index-Only Scan)
- 테이블을 조회하지 않고 인덱스만으로 필요한 데이터를 가져오는 방식
- **커버링 인덱스(Covering Index)**를 활용하여 성능 최적화 가능

### 4. 클러스터 인덱스 스캔(Clustered Index Scan)
- 클러스터 인덱스를 활용하여 테이블의 정렬된 데이터 검색
- WHERE 절의 조건이 클러스터 키와 일치할 경우 효율적

### 5. 시퀀셜 스캔(Sequential Scan)
- 테이블을 순차적으로 읽는 방식
- 대량의 데이터 처리 시 효과적이며, 정렬된 데이터를 빠르게 검색 가능

## 실행 계획 분석 방법
스캐닝 모델을 확인하고 최적화하기 위해 실행 계획을 분석할 수 있습니다.
- MySQL / PostgreSQL: `EXPLAIN` 또는 `EXPLAIN ANALYZE`
- Oracle: `EXPLAIN PLAN`
- SQL Server: `SHOWPLAN`

## 최적의 스캐닝 모델 선택을 위한 팁
- **적절한 인덱스를 생성하여 인덱스 스캔을 유도**
- **조회되는 데이터 양에 따라 전체 테이블 스캔과 인덱스 스캔을 선택**
- **EXPLAIN을 사용하여 실행 계획을 지속적으로 모니터링**
- **통계 정보를 최신 상태로 유지하여 옵티마이저의 정확도를 향상**

## 결론
데이터베이스 옵티마이저는 SQL 성능을 극대화하는 중요한 요소입니다. 특히, 적절한 스캐닝 모델을 선택하는 것이 효율적인 데이터 검색의 핵심이며, 이를 위해 실행 계획 분석 및 인덱스 최적화가 필수적입니다.

